from sympy import symbols, Eq, solve
import numpy as np


def find_pattern(data):
    n = len(data)

    # Создаем символьные переменные
    x, k = symbols('x k')

    # Создаем уравнение вида ax^2 + bx + c = 0
    equation = Eq(k * x ** 2 + x, data[0])

    # Решаем уравнение для k
    solutions = solve(equation, k)

    if len(solutions) > 0:
        k_value = solutions[0]

        # Генерируем последовательность на основе найденного k
        generated_data = [k_value.subs(x, i) for i in range(1, n + 1)]

        # Выводим найденное k
        print(f"Найденное значение k: {k_value}")

        # Выводим разницу между данными и сгенерированной последовательностью
        differences = np.array(data) - np.array(generated_data)
        print("Разница между данными и сгенерированной последовательностью:")
        print(differences)

    else:
        print("Не удалось найти закономерность.")


# Пример использования
data = [2, 6, 6, 12, 12, 18, 12, 30, 6, 30, 12, 30, 12, 6, 30, 12, 30, 12, 30, 36, 72, 12, 30, 60, 48, 30, 18, 24, 18,
        150, 12, 6, 30, 24, 138, 12, 18, 12, 30, 60, 78, 48, 12, 12, 18, 108, 24, 30, 6, 120, 12, 48, 30, 24, 66, 84, 6,
        54, 18, 48, 30, 54, 6, 24, 18, 12, 96, 30, 42, 30, 42, 168, 42, 66, 30, 24, 18, 60, 12, 168, 30, 120, 48, 84, 6,
        42, 30, 30, 12, 18, 72, 6, 60, 12, 18, 24, 90, 96, 54, 30, 66, 12, 72, 18, 30, 42, 36, 30, 60, 12, 12, 18, 12,
        66, 84, 60, 36, 30, 90, 12, 72, 66, 12, 132, 36, 42, 12, 78, 132, 48, 138, 24, 36, 24, 18, 120, 12, 6, 84, 108,
        18, 12, 210, 42, 66, 72, 30, 60, 90, 102, 18, 90, 30, 12, 60, 18, 12, 36, 42, 78, 12, 168, 84, 96, 24, 18, 108,
        30, 60, 12, 30, 168, 120, 72, 60, 78, 132, 12, 60, 96, 42, 108, 60, 30, 192, 18, 24, 108, 30, 12, 30, 198, 42,
        60, 78, 12, 6, 24, 168, 48, 42, 48, 90, 72, 78, 30, 30, 24, 48, 132, 30, 30, 96, 30, 42, 30, 180, 150, 30, 48,
        120, 12, 48, 42, 12, 180, 138, 60, 150, 18, 60, 54, 108, 30, 72, 30, 36, 54, 78, 12, 126, 162, 72, 210, 96, 84,
        6, 210, 120, 60, 282, 12, 18, 12, 36, 72, 48, 24, 30, 66, 12, 72, 168, 72, 66, 60, 102, 12, 30, 36, 240, 270,
        132, 18, 42, 30, 222, 60, 6, 84, 6, 150, 84, 90, 6, 72, 48, 42, 132, 90, 180, 18, 42, 138, 72, 78, 48, 162, 18,
        84, 96, 30, 72, 90, 18, 60, 24, 66, 42, 48, 72, 12, 36, 30, 54, 6, 12, 60, 12, 120, 36, 24, 210, 18, 372, 6,
        162, 60, 42, 30, 168, 42, 6, 42, 72, 156, 54, 90, 48, 72, 30, 30, 126, 84, 126, 84, 36, 30, 42, 90, 78, 30, 24,
        36, 90, 84, 30, 6, 42, 132, 126, 60, 114, 30, 36, 30, 12, 12, 36, 90, 102, 198, 54, 18, 48, 114, 6, 90, 114, 60,
        30, 48, 18, 60, 42, 120, 102, 66, 12, 18, 144, 90, 78, 168, 24, 66, 42, 18, 54, 90, 78, 198, 72, 192, 48, 498,
        60, 54, 138, 132, 6, 102, 60, 108, 24, 198, 48, 84, 66, 114, 138, 12, 420, 18, 12, 18, 132, 18, 12, 60, 108, 48,
        132, 42, 126, 72, 48, 12, 42, 108, 48, 12, 42, 126, 24, 156, 12, 72, 96, 30, 42, 60, 138, 24, 48, 42, 90, 270,
        108, 78, 180, 12, 168, 102, 90, 120, 132, 78, 48, 132, 120, 78, 24, 66, 282, 12, 18, 210, 42, 30, 30, 66, 72,
        72, 120, 30, 180, 6, 42, 78, 180, 30, 60, 24, 48, 108, 24, 48, 42, 30, 90, 30, 48, 108, 84, 30, 78, 30, 30, 102,
        78, 30, 108, 42, 18, 240, 12, 18, 132, 18, 42, 18, 204, 96, 30, 54, 48, 42, 66, 102, 30, 12, 78, 60, 108, 84, 6,
        114, 90, 30, 198, 168, 60, 24, 60, 138, 72, 36, 60, 114, 96, 234, 126, 60, 252, 12, 108, 30, 90, 180, 108, 30,
        24, 186, 24, 18, 102, 90, 30, 180, 246, 90, 120, 12, 108, 42, 42, 18, 42, 36, 174, 120, 120, 66, 12, 102, 30,
        138, 318, 12, 198, 90, 24, 276, 102, 108, 60, 150, 294, 36, 24, 30, 156, 24, 108, 90, 150, 90, 108, 24, 36, 54,
        108, 42, 60, 126, 54, 108, 72, 60, 138, 60, 150, 270, 78, 144, 36, 30, 42, 132, 6, 102, 72, 66, 60, 42, 72, 66,
        12, 102, 150, 90, 78, 72, 348, 18, 42, 138, 24, 246, 234, 228, 42, 90, 90, 36, 42, 90, 150, 90, 90, 48, 12, 228,
        90, 204, 36, 30, 240, 42, 12, 30, 36, 30, 312, 192, 96, 72, 60, 108, 30, 54, 48, 42, 36, 12, 120, 42, 90, 48,
        30, 78, 54, 36, 24, 18, 120, 18, 120, 72, 48, 132, 18, 54, 30, 30, 78, 132, 198, 90, 42, 300, 78, 90, 72, 66,
        42, 102, 6, 72, 18, 42, 240, 48, 60, 42, 102, 96, 114, 108, 72, 180, 168, 150, 42, 186, 60, 24, 60, 36, 12, 270,
        42, 18, 108, 180, 114, 390, 18, 78, 42, 42, 48, 288, 132, 168, 114, 6, 102, 180, 12, 30, 156, 84, 30, 108, 60,
        108, 30, 30, 210, 24, 30, 66, 114, 96, 84, 18, 12, 270, 30, 48, 60, 18, 180, 30, 234, 108, 210, 42, 18, 60, 138,
        24, 48, 12, 150, 186, 120, 102, 12, 30, 156, 12, 138, 60, 24, 30, 156, 42, 420, 12, 66, 90, 390, 12, 102, 126,
        12, 18, 234, 180, 48, 90, 90, 420, 150, 12, 48, 108, 630, 42, 12, 6, 42, 168, 114, 78, 30, 168, 12, 48, 42, 150,
        312, 36, 114, 150, 126, 84, 120, 96, 42, 108, 72, 72, 96, 180, 72, 18, 42, 120, 18, 12, 108, 90, 54, 126, 252,
        210, 180, 102, 96, 192, 48, 24, 6, 54, 138, 18, 150, 180, 174, 180, 96, 72, 168, 42, 222, 108, 60, 18, 132, 120,
        42, 66, 144, 90, 6, 240, 24, 66, 30, 72, 72, 120, 18, 42, 18, 180, 78, 30, 84, 48, 222, 36, 42, 30, 30, 18, 264,
        66, 12, 48, 24, 60, 78, 162, 96, 72, 210, 12, 66, 54, 6, 24, 18, 198, 180, 24, 198, 168, 24, 300, 246, 72, 168,
        252, 60, 42, 180, 30, 96, 102, 108, 12, 30, 252, 156, 42, 180, 12, 138, 78, 90, 282, 12, 78, 78, 102, 108, 54,
        120, 108, 180, 42, 90, 276, 24, 6, 150, 60, 12, 60, 138, 24, 426, 54, 246, 72, 30, 30, 210, 108, 90, 174, 78,
        168, 162]

find_pattern(data)
