# Коэффициенты выигрыша для символов
symbol_coefficients = {
    1: 1.0,  # Wild
    2: 0.2,  # Gloves
    3: 0.5,  # Armor
    4: 0.3,  # First Aid Kit
    5: 0.4,  # Grenade
    6: 0.6,  # Karambit
    7: 0.8,  # P90
    8: 0.9,  # Shotgun
    9: 1.0,  # Assault Rifle
    10: 1.2,  # Rifle
    11: 1.5,  # Submachine Gun
    12: 1.0,  # Pistol
    13: 0.0  # Скаттер
}

paylines = [
    # Горизонтальные линии
    [0, 1, 2, 3, 4],  # Линия выплат 1 (верхняя горизонтальная линия)
    [5, 6, 7, 8, 9],  # Линия выплат 2
    [10, 11, 12, 13, 14],  # Линия выплат 3
    [15, 16, 17, 18, 19],  # Линия выплат 4
    [20, 21, 22, 23, 24],  # Линия выплат 5 (нижняя горизонтальная линия)

    # Вертикальные линии
    [0, 5, 10, 15, 20],  # Линия выплат 6 (левая вертикальная линия)
    [1, 6, 11, 16, 21],  # Линия выплат 7
    [2, 7, 12, 17, 22],  # Линия выплат 8
    [3, 8, 13, 18, 23],  # Линия выплат 9
    [4, 9, 14, 19, 24],  # Линия выплат 10 (правая вертикальная линия)

    # Диагональные линии
    [0, 6, 12, 18, 24],  # Линия выплат 11 (левая диагональная линия)
    [4, 8, 12, 16, 20],  # Линия выплат 12 (правая диагональная линия)

    # Дополнительные линии
    [1, 7, 13, 19, 23],  # Линия выплат 13
    [0, 7, 14, 21, 24],  # Линия выплат 14
    [3, 7, 11, 15, 19],  # Линия выплат 15
    [1, 6, 12, 18, 23],  # Линия выплат 16
    [2, 8, 12, 16, 22],  # Линия выплат 17
    [0, 6, 11, 16, 22],  # Линия выплат 18
    [1, 8, 13, 18, 24],  # Линия выплат 19
    [1, 7, 12, 17, 23],  # Линия выплат 20
    [2, 7, 13, 19, 24],  # Линия выплат 21
    [3, 6, 12, 18, 22],  # Линия выплат 22
    [0, 8, 13, 19, 24],  # Линия выплат 23
    [1, 6, 12, 18, 23],  # Линия выплат 24
]

paytable = [
    {"symbols": [1, 1, 1, 1, 1], "coefficient": 100.0},  # Комбинация из 5 символов Wild
    {"symbols": [2, 2, 2, 2, 2], "coefficient": 50.0},  # Комбинация из 5 символов Gloves
    {"symbols": [3, 3, 3, 3, 3], "coefficient": 30.0},  # Комбинация из 5 символов Armor
    {"symbols": [4, 4, 4, 4, 4], "coefficient": 20.0},  # Комбинация из 5 символов First Aid Kit
    {"symbols": [5, 5, 5, 5, 5], "coefficient": 15.0},  # Комбинация из 5 символов Grenade
    {"symbols": [6, 6, 6, 6, 6], "coefficient": 10.0},  # Комбинация из 5 символов Karambit
    {"symbols": [7, 7, 7, 7, 7], "coefficient": 7.5},  # Комбинация из 5 символов P90
    {"symbols": [8, 8, 8, 8, 8], "coefficient": 5.0},  # Комбинация из 5 символов Shotgun
    {"symbols": [9, 9, 9, 9, 9], "coefficient": 3.0},  # Комбинация из 5 символов Assault Rifle
    {"symbols": [10, 10, 10, 10, 10], "coefficient": 2.5},  # Комбинация из 5 символов Rifle
    {"symbols": [11, 11, 11, 11, 11], "coefficient": 2.0},  # Комбинация из 5 символов Submachine Gun
    {"symbols": [12, 12, 12, 12, 12], "coefficient": 1.5},  # Комбинация из 5 символов Pistol
    {"symbols": [13, 13, 13, 13, 13], "coefficient": 1.0},  # Комбинация из 5 символов Scatter
    # Добавьте остальные комбинации символов и их коэффициенты сюда
]


def calculate_win(line):
    win = 0.0
    scatter_count = line.count(13)  # Подсчет количества скаттер-символов (id = 13)

    if scatter_count >= 3:
        win += scatter_count * total_bet  # Выигрыш за скаттеры умножается на тоталбет

    # Расчет выигрыша по комбинациям символов на активных линиях
    # Дополните кодом для расчета выигрышей за обычные символы (не wild и не скаттер)

    return win


def calculate_expected_value(main_spins, free_spins):
    total_spins = len(main_spins) + len(free_spins)
    total_win = 0.0

    # Расчет выигрыша для основных спинов
    for spin in main_spins:
        spin_win = calculate_win(spin)
        total_win += spin_win

    # Расчет выигрыша для фригеймов
    for spin in free_spins:
        spin_win = calculate_win(spin)
        total_win += spin_win

    expected_value = total_win / total_spins
    return expected_value


# Ваши данные для расчета
main_spins = [
    [10, 7, 13, 12, 2, 9, 7, 10, 5, 8, 11, 7, 1, 9, 4, 12, 8, 6, 11, 3, 9, 12, 4, 1, 3, 8, 10, 2, 6, 9, 5, 13, 10, 3,
     11, 8, 5, 7, 12, 11, 5, 4],
    [4, 7, 13, 8, 10, 3, 12, 6, 11, 2, 9, 5, 10, 1, 9, 7, 12, 6, 11, 8, 4, 6, 12, 10, 8, 2, 9, 11, 5, 8, 10, 7, 3, 12],
    [8, 1, 10, 12, 5, 13, 3, 4, 9, 7, 5, 8, 6, 12, 1, 10, 3, 8, 13, 7, 5, 10, 11, 4, 9, 3, 6, 12, 7, 11, 6, 8, 9, 2, 11,
     7, 10, 9, 2, 6, 11, 4, 12],
    [8, 6, 10, 5, 12, 8, 6, 11, 9, 3, 12, 10, 7, 3, 8, 4, 10, 5, 9, 13, 8, 4, 7, 9, 6, 4, 1, 3, 7, 11, 2, 12, 9, 10, 13,
     11, 2, 12, 1, 7, 11],
    [1, 3, 12, 8, 11, 4, 2, 10, 12, 6, 8, 9, 1, 11, 7, 12, 9, 3, 7, 6, 10, 5, 7, 11, 9, 4, 8, 11, 2, 7, 12, 5, 9, 13,
     10, 11, 4, 8, 9, 13, 7, 5, 10]
]
free_spins = [
    [11, 12, 8, 7, 11, 1, 8, 12, 10, 6, 8, 5, 12, 1, 9, 1, 10, 11, 6, 9, 5, 10, 13, 7, 11, 1, 10, 12, 1, 5, 9, 8, 5, 11,
     6, 7, 1, 1, 1, 10, 7, 13, 8, 9],
    [8, 6, 12, 11, 1, 1, 6, 5, 8, 9, 10, 1, 1, 1, 11, 9, 10, 7, 8, 5, 9, 6, 11, 12, 8, 1, 7, 10, 1, 8, 9, 13, 12, 11, 7,
     9, 5, 7, 6, 1, 8, 9, 13, 7],
    [11, 13, 8, 12, 1, 10, 11, 6, 1, 9, 5, 8, 10, 6, 1, 9, 10, 1, 1, 7, 13, 9, 1, 10, 6, 8, 12, 5, 11, 6, 9, 7, 5, 12,
     1, 11, 10, 12, 7, 11, 8, 9],
    [9, 7, 6, 8, 12, 1, 10, 11, 1, 7, 8, 12, 1, 11, 9, 5, 7, 10, 11, 6, 1, 7, 8, 13, 9, 5, 11, 1, 1, 1, 12, 10, 6, 7,
     13, 8, 6, 11, 10, 1, 9, 12, 1],
    [10, 1, 11, 9, 8, 5, 7, 10, 12, 8, 13, 11, 9, 6, 1, 12, 11, 7, 10, 8, 9, 7, 1, 12, 9, 10, 1, 12, 1, 8, 7, 11, 10, 5,
     9, 13, 7, 12, 6, 1, 5, 8]
]

total_bet = 1  # Общая ставка на спин (тоталбет)


def calculate_symbol_probabilities(spins):
    symbol_counts = {symbol_id: 0 for symbol_id in range(1, 14)}  # Счетчики вхождений символов

    total_spins = len(spins)
    for spin in spins:
        for symbol_id in spin:
            symbol_counts[symbol_id] += 1

    symbol_probabilities = {symbol_id: count / total_spins for symbol_id, count in symbol_counts.items()}
    return symbol_probabilities


# Расчет вероятностей выпадения символов для основных спинов и фригейма
main_spins_probabilities = calculate_symbol_probabilities(main_spins)
free_spins_probabilities = calculate_symbol_probabilities(free_spins)

# Расчет математического ожидания игры
expected_value = calculate_expected_value(main_spins, free_spins)
print(f"Математическое ожидание игры: {expected_value:.2f}")
